<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="apple-touch-icon" sizes="180x180" href="./apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="./img/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="./img/favicon-16x16.png" />

    <title>FOM | PRINT TAGS</title>
    <link rel="stylesheet" href="./css/bootstrap.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
    <link href="./css/style.css" rel="stylesheet" />
    
  </head>
  <body data-bs-theme="dark">
    <header class="fixed-top d-print-none">
      <nav class="navbar navbar-expand-xl bg-body-tertiary bg-blur">
        <div class="container-fluid">
          <div class="navbar-left">
            <a class="navbar-brand" href="./">
              <img id="logo" class="me-2" src="./img/fom-app-logo-01.svg" alt="Logo" width="180" height="30.6" />
            </a>
            <button type="button" class="btn btn-danger btn-sm" title="Create custom tag" onclick="openKeyTagsByStockNumberModal('${stockNumber}')">
              <i class="bi bi-plus-circle"></i> NEW
            </button>
          </div>


          <form class="d-flex flex-row d-none d-sm-block" role="search">
            <label for="searchFilter" class="visually-hidden">Search</label>
            <input
              type="search"
              class="form-control d-inline-flex search-width mx-1"
              placeholder="Search"
              aria-label="Search"
              id="searchFilter"
              list="datalistOptions"
              title="Filter vehicles by year, make, model, stock number or VIN"
              autocomplete="off"
              style="width: 200px"
              oninput="handleSearchInput(this.value)"
            />
            <datalist id="datalistOptions">
              <!-- Options -->
              <option value="3 Wheel Motorcycle"></option>
              <option value="ATV"></option>
              <option value="Boat Trailers"></option>
              <option value="Boats"></option>
              <option value="Cruiser/V-Twin"></option>
              <option value="Dirt Bikes"></option>
              <option value="Outboard Motors"></option>
              <option value="PWC"></option>
              <option value="Pontoons"></option>
            </datalist>
            <select id="yearFilter" class="form-select d-inline-flex me-1" style="width: 90px">
              <option value="">Year</option>
              <option value="2026">2026</option>
              <option value="2025">2025</option>
              <option value="2024">2024</option>
              <option value="2023">2023</option>
              <option value="2022">2022</option>
              <option value="2021">2021</option>
              <option value="2020">2020</option>
              <option value="2019">2019</option>
              <option value="2018">2018</option>
              <option value="2017">2017</option>
              <option value="2016">2016</option>
              <option value="2015">2015</option>
              <option value="2015">2014</option>
              <option value="2015">2013</option>
              <option value="2015">2012</option>
              <option value="2015">2011</option>
              <option value="2015">2010</option>
            </select>

            <select id="manufacturerFilter" class="form-select d-inline-flex me-1" style="width: 150px">
              <option value="">Manufacturer</option>
              <option value=""">All</option>
              <option value="BMW">BMW</option>
              <option value="Can-Am">Can-Am</option>
              <option value="Harley-Davidson">Harley Davidson</option>
              <option value="Honda">Honda</option>
              <option value="Indian Motorcycle">Indian Motorcycle</option>
              <option value="Kawasaki">Kawasaki</option>
              <option value="Scarab">Scarab</option>
              <option value="Sea-Doo">Sea-Doo</option>
              <option value="South Bay">South Bay</option>
              <option value="Suzuki">Suzuki</option>
              <option value="Suzuki Marine">Suzuki Marine</option>
              <option value="Polaris Industries">Polaris Industries</option>
              <option value="Vanderhall">Vanderhall</option>
              <option value="Victory Motorcycles">Victory Motorcycles</option>
              <option value="Yamaha">Yamaha</option>
            </select>
          </form>
          <div class="toggles-group">
            <button id="toggleThemeButton" class="btn btn-outline-secondary px-3 mx-1" type="button">
              <i id="theme-icon" class="bi bi-moon-stars"></i>
            </button>
            <button
              class="btn btn-danger py-0 px-2 mx-1 d-block d-sm-none"
              type="button"
              data-bs-toggle="offcanvas"
              data-bs-target="#offcanvasScrolling"
              aria-controls="offcanvasNavbar"
              aria-label="Toggle navigation"
            >
              <i class="bi bi-filter-right fs-4 mx-1"></i>
            </button>
          </div>
        </div>
      </nav>
    </header>

    <div
      class="offcanvas offcanvas-end d-block d-sm-none"
      data-bs-scroll="true"
      data-bs-backdrop="false"
      tabindex="-1"
      id="offcanvasScrolling"
      aria-labelledby="offcanvasScrollingLabel"
    >
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasNavbarLabel">More Filters</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body">
        <form class="d-flex flex-column row-gap-3 my-3" role="search">
          <div class="d-flex flex-column row-gap-2">
            <label for="searchFilter" class="visually-hidden">Search</label>
            <input
              type="search"
              class="form-control"
              placeholder="Search"
              aria-label="Search"
              id="searchFilter"
              title="Filter vehicles by year, name, stock number, or VIN"
              autocomplete="off"
            />
            <select id="yearFilter" class="form-select me-2">
              <option value="">Year</option>
              <option value="2026">2026</option>
              <option value="2025">2025</option>
              <option value="2024">2024</option>
              <option value="2023">2023</option>
              <option value="2022">2022</option>
              <option value="2021">2021</option>
              <option value="2020">2020</option>
              <option value="2019">2019</option>
              <option value="2018">2018</option>
              <option value="2017">2017</option>
              <option value="2016">2016</option>
              <option value="2015">2015</option>
              <option value="2015">2014</option>
              <option value="2015">2013</option>
              <option value="2015">2012</option>
              <option value="2015">2011</option>
              <option value="2015">2010</option>
            </select>
            <select id="manufacturerFilter" class="form-select me-2">
              <option value="">Manufacturer</option>
              <option value="">All</option>
              <option value="BMW">BMW</option>
              <option value="Can-Am">Can-Am</option>
              <option value="Harley-Davidson">Harley Davidson</option>
              <option value="Honda">Honda</option>
              <option value="Indian Motorcycle">Indian Motorcycle</option>
              <option value="Kawasaki">Kawasaki</option>
              <option value="Scarab">Scarab</option>
              <option value="Sea-Doo">Sea-Doo</option>
              <option value="South Bay">South Bay</option>
              <option value="Suzuki">Suzuki</option>
              <option value="Suzuki Marine">Suzuki Marine</option>
              <option value="Polaris Industries">Polaris Industries</option>
              <option value="Vanderhall">Vanderhall</option>
              <option value="Victory Motorcycles">Victory Motorcycles</option>
              <option value="Yamaha">Yamaha</option>
            </select>
            <select id="typeFilter" class="form-select me-2">
              <option value="">Type</option>
              <option value="3 Wheel Motorcycle">3 Wheel Motorcycle</option>
              <option value="ATV">ATV</option>
              <option value="Boat Trailers">Boat Trailers</option>
              <option value="Boats">Boats</option>
              <option value="Cruiser/V-Twin">Cruiser/V-Twin</option>
              <option value="Dirt Bikes">Dirt Bikes</option>
              <option value="Outboard Motors">Outboard Motors</option>
              <option value="PWC">PWC</option>
              <option value="Pontoons">Pontoons</option>
              <option value="Scooters">Scooters</option>
              <option value="Side x Side">Side x Side</option>
              <option value="Street Bikes">Street Bikes</option>
            </select>
            <select id="usageFilter" class="form-select me-2">
              <option value="">New or Used</option>
              <option value="New">New</option>
              <option value="Used">Used</option>
            </select>
            <label for="updatedFilterLabel" class="visually-hidden">Date Updated:</label>
            <input type="date" id="updatedFilter" class="form-control me-2" />
            <button class="btn btn-danger" onclick="filterTable()">Reset all filters</button>
            <nav class="side-menu-footer">V.0.1.0</nav>
          </div>
        </form>
      </div>
    </div>

    <main>
      <div class="container-fluid">
        <div class="spacer-75 d-flex flex-row align-items-center"></div>
        
        <div class="d-flex pb-2 text-secondary">
          <!-- element for displaying row count -->
          Results: <span class="mx-1" id="rowCountDisplay"></span>
        </div>
        <div class="">
          <table id="vehiclesTable" class="table table-responsive align-middle">
            <thead>
              <tr>
                <th class="text-center">Image</th>
                <th class="text-center">Usage</th>
                <th class="text-center">Year</th>
                <th class="">Make</th>
                <th class="">Model</th>
                <th class="visually-hidden">Type</th>
                <th class="visually-hidden">Color</th>
                <th class="text-start">Stock Number</th>
                <th class="">DMS Price</th>
                <th class="">Updated</th>
                <th class="text-center">Photos</th>
                <th class="text-center">Details, Print Tags</th>
              </tr>
            </thead>
            <tbody>
              <!-- Data will be inserted here dynamically by JavaScript -->
            </tbody>
          </table>
        </div>
    </main>

      <div class="modal fade" id="overlayModal" tabindex="-1" aria-labelledby="overlayModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-fullscreen">
          <div class="modal-content">
            <div class="modal-header bg-light text-dark border-0 visually-hidden">
              <h5 class="modal-title" id="overlayModalLabel">OVERLAY PREVIEW</h5>
              <button type="button" class="btn-close btn-primary bg-light text-dark me-2" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body m-0 p-0">
              <button type="button" class="btn btn-outline-secondary position-absolute top-0 end-0 mt-2 me-4" title="Esc" data-bs-dismiss="modal" aria-label="Close"><i class="bi bi-x-lg"></i></button>
              <iframe id="overlayIframe" src="" style="width: 100%; height: 99%; border: none; margin: 0; padding: 0"></iframe>
            </div>
            <div class="modal-footer visually-hidden">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              <!-- Print Button -->
            </div>
          </div>
        </div>
      </div>

      <div class="modal vh-50 fade" id="keytagModal" tabindex="-1" aria-labelledby="keytagModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
          <div class="modal-content">
            <div class="modal-header d-flex flex-row justify-content-between align-items-center d-print-none">
              <h5 class="modal-title text-capitalize" id="keyTagsByStockNumberModalLabel"><i class="bi bi-tag me-2 icon-circle"></i></h5>
              <h1 class="modal-title ms-2 fs-5" id="keytagModalLabel">StockNumber</h1>
              <div class="form-check form-switch w-50 d-flex justify-content-end">
                <input class="form-check-input mx-3" type="checkbox" role="switch" id="verticalKeyTagSwitch" onchange="toggleVerticalKeyTag(event)">
                <label class="form-check-label" for="verticalKeyTagSwitch">Deal Jacket Label</label>
              </div>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body bg-light dots" style="height:100%; min-height: 75vh; width:100%; margin: 0; padding: 0;">
              <div class="main-content">
                <!-- Elements to display the fetched data -->
                <div id="keytagContainer" class="key-tag-container zoom-1 zoomElement text-truncate mx-1">
                  <div id="modelUsage" class="model-usage text-truncate">New or Used</div>
                  <div id="stockNumber" class="stock-number">Stock Number</div>
                  <div id="modelYear" class="model-year text-truncate">Year</div>
                  <div id="manufacturer" class="manufacturer text-truncate">Manufacturer</div>
                  <div id="modelName" class="model-name text-truncate">Model Name</div>
                  <div id="modelCode" class="model-code text-truncate">Model Code</div>
                  <div id="modelColor" class="model-color text-truncate">Model Color</div>
                  <div id="modelVin" class="model-vin text-truncate">VIN NUMBER</div>
                </div>
                <!-- New rotated label -->
                <div id="keytagVerticalContainer" class="key-tag-container zoomElementVertical mx-1 visually-hidden">
                  <div class="rotated-label-text text-truncate d-flex flex-column gap-1">
                    <div class="year-make-container" style="height: 2in; margin: 0">
                      <span id="modelYearVertical" class="model-year-vertical">Year</span>
                      <span id="manufacturerVertical" class="manufacturer-vertical">Make</span>
                    </div>
                    <div class="name-vin-container" style="height: 2in; margin: 0">
                      <div id="modelVinVertical" class="model-vin-vertical">VIN</div>
                      <div id="modelNameVertical" class="model-name-vertical">Model Name</div>
                    </div>
                  </div>
                </div>
                <div id="message"></div>
              </div>
            </div>
            <div class="modal-footer d-print-none">
              <div class="btn-group me-4" role="group" aria-label="Zoom buttons">
                <button type="button" id="zoomOutBtn" class="btn-icon fs-2 m-1"><i class="bi bi-dash-square"></i></button>
                <button type="button" id="zoomInBtn" class="btn-icon fs-2 m-1"><i class="bi bi-plus-square"></i></button>
              </div>
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              <button type="button" id="printKeyTag" class="btn btn-danger pe-3"><i class="bi bi-printer me-2"></i> Print Key Tag</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="keyTagsByStockNumberModal" tabindex="-1" aria-labelledby="keyTagsByStockNumberModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-xl">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title text-capitalize" id="keyTagsByStockNumberModalLabel"><i class="bi bi-tag me-2 icon-circle"></i>CREATE KEY TAGS</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body m-0 p-0 overflow-hidden" style="height: 100%; width: 100% min-height: 100vh;">
            <iframe id="keyTagsByStockNumberModal" src="./key-tags/index.html" style="width: 100%; min-height: 78vh; height: 100%; border: 0; margin: 0; padding: 0"></iframe>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <!-- Print Button -->
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="hangTagsModal" tabindex="-1" aria-labelledby="hangTagsModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-fullscreen">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title text-capitalize" id="hangTagsModalLabel"><i class="bi bi-tags me-2 icon-circle"></i>Hang Tags</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="h-100">
            <iframe id="hangTagsIframe" src="" style="width: 100%; height: 100%; border: none; margin: 0; padding: 0"></iframe>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button type="button" class="btn btn-danger me-3" onclick="printIframeContent()"><i class="bi bi-printer me-2"></i> Print Hang Tag</button>
            <!-- Print Button -->
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="roTagModal" tabindex="-1" aria-labelledby="roTagModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-fullscreen">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="roTagModalLabel">Hang Tags</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body m-0 p-0">
            <iframe id="roTagIframe" src="" style="width: 100%; height: 100%; border: none; margin: 0; padding: 0"></iframe>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button type="button" class="btn btn-danger pe-3" onclick="printIframeContent()"><i class="bi bi-printer me-2"></i> Print Hang Tag</button>
            <!-- Print Button -->
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="textMessageModal" tabindex="-1" aria-labelledby="textMessageModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-fullscreen">
        <div class="modal-content">
          <div class="modal-header d-print-none">
            <h1 class="modal-title fs-5" id="textMessageModalLabel">StockNumber</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body dots">
            <div class="spacer-100"></div>
            <!-- Elements to display the fetched data -->
            <div id="textMessageContainer" class="d-flex justify-content-center">
              <div id="modelUsage" class="model-usage text-truncate">New or Used</div>
              <div id="stockNumber" class="stock-number text-truncate">Stock Number</div>
              <div id="modelYear" class="model-year text-truncate">Year</div>
              <div id="manufacturer" class="manufacturer text-truncate">Manufacturer</div>
              <div id="modelName" class="model-name text-truncate">Model Name</div>
              <div id="modelCode" class="model-code text-truncate">Model Code</div>
              <div id="modelColor" class="model-color text-truncate">Model Color</div>
              <div id="modelVin" class="model-vin text-truncate">VIN NUMBER</div>
            </div>
            <pre id="textMessageBody"></pre>
            <div class="spacer-100"></div>
          </div>
          <div class="modal-footer d-print-none">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button type="button" id="printTextMessage" class="btn btn-danger">Print Text Message</button>
          </div>
        </div>
      </div>
    </div>

    <script src="./js/bootstrap.bundle.js"></script>
    <script src="./js/numeral.min.js"></script>
    <script src="./js/moment.js"></script>
    <script src="./js/app.js"></script>
    <iframe id="printFrame" style="display: none"></iframe>
  </body>
</html>
